<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<title>Stoisko z lemoniadą</title>
<style>
body {
    font-family: monospace;
    background: #f0f0f0;
    padding: 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
}

/* Logowanie */
#loginPanel {
    text-align: center;
    margin-bottom: 20px;
}

#loginPanel input {
    margin: 5px;
}

/* Nagłówek stoisko */
#header {
    display: none;
    font-size: 24px;
    font-weight: bold;
    margin-bottom: 20px;
}

/* Lista produktów */
.product {
    display: flex;
    justify-content: space-between;
    width: 250px;
    margin: 5px 0;
    align-items: center;
}

.product span.ilosc {
    width: 30px;
    text-align: center;
}

.product button {
    width: 30px;
    margin-left: 5px;
}

/* Panel przycisków */
#buttons {
    display: flex;
    gap: 10px;
    margin: 10px 0;
}

/* Panel admina */
.adminBtn {
    display: none;
}

/* Zarobek */
#zarobek {
    font-weight: bold;
    margin: 10px 0;
    display: none;
}

/* Wartość zakupu */
#wartoscZakupu {
    font-weight: bold;
    margin-bottom: 10px;
}

/* Paragon */
#paragon {
    display: none;
    background: white;
    padding: 10px 15px;
    border: 1px dashed black;
    text-align: center;
    min-width: 250px;
}

.parLine { white-space: pre; display: block; }
.parTitle { font-weight: bold; font-size: 18px; margin: 6px 0; }
.parItem { display: flex; justify-content: space-between; margin: 2px 0; }
.parSum { font-weight: bold; margin: 6px 0; }
.parThanks { margin-top: 4px; }
</style>
</head>
<body>

<!-- Logowanie -->
<div id="loginPanel">
    <div style="font-weight:bold; margin-bottom:5px;">Logowanie</div>
    <input type="text" id="login" placeholder="Login">
    <input type="password" id="password" placeholder="Hasło">
    <button onclick="zaloguj()">Zaloguj</button>
    <div id="loginError" style="color:red; margin-top:5px;"></div>
</div>

<!-- Nagłówek stoisko -->
<div id="header">Stoisko z lemoniadą</div>

<!-- Lista produktów -->
<div id="products" style="display:none;">
    <div class="product">
        <span id="bezSoku" class="ilosc">0</span>
        <button onclick="zmienIlosc('bezSoku',1)">+</button>
        <button onclick="zmienIlosc('bezSoku',-1)">-</button>
        <span>Lem. bez soku</span>
    </div>
    <div class="product">
        <span id="zSokiem" class="ilosc">0</span>
        <button onclick="zmienIlosc('zSokiem',1)">+</button>
        <button onclick="zmienIlosc('zSokiem',-1)">-</button>
        <span>Lem. z sokiem</span>
    </div>
</div>

<!-- Przyciski -->
<div id="buttons" style="display:none;">
    <button onclick="kopiujParagon()">Kopiuj paragon jako obraz</button>
    <button onclick="pobierzParagon()">Pobierz paragon jako obraz</button>
    <button class="adminBtn" onclick="wyzerujZarobek()">Wyzeruj zarobki</button>
    <button class="adminBtn" onclick="dodajKwote()">Dodaj zarobek</button>
    <button class="adminBtn" onclick="odejmijKwote()">Odejmij zarobek</button>
</div>

<!-- Zarobek admin -->
<div id="zarobek">Zarobek: 0 zł</div>

<!-- Wartość zakupu -->
<div id="wartoscZakupu" style="display:none;">Wartość zakupu: 0 zł</div>

<!-- Paragon -->
<div id="paragon">
    <div class="parLine">==============================</div>
    <div class="parTitle">LEMONIADA</div>
    <div class="parLine">==============================</div>
    <div id="parDate" class="parLine">Data: --</div>
    <div class="parLine">------------------------------</div>
    <div id="parItems"></div>
    <div class="parLine">------------------------------</div>
    <div id="parSum" class="parSum">SUMA: 0.00 zł</div>
    <div class="parLine">==============================</div>
    <div class="parThanks">Dziękujemy za zakupy!</div>
    <div class="parLine">==============================</div>
</div>

<script>
// --- Logowanie ---
const users = {
    "stoisko":"lemoniada123",
    "admin":"admin123"
};

function zaloguj(){
    const login = document.getElementById('login').value;
    const pass = document.getElementById('password').value;

    if(users[login] && users[login] === pass){
        document.getElementById('loginPanel').style.display = 'none';
        document.getElementById('header').style.display = 'block';
        document.getElementById('products').style.display = 'block';
        document.getElementById('buttons').style.display = 'flex';
        document.getElementById('paragon').style.display = 'block';
        document.getElementById('wartoscZakupu').style.display = 'block';
        document.getElementById('zarobek').style.display = 'block';

        if(login === 'admin'){
            document.querySelectorAll('.adminBtn').forEach(btn=>btn.style.display='inline-block');
        }
        ustawDate();
        aktualizujParagon();
        aktualizujWartoscZakupu();
    } else {
        document.getElementById('loginError').innerText="Błędny login lub hasło!";
    }
}

// --- Produkty ---
let produkty = {
    "bezSoku": {nazwa:"Lem. bez soku", cena:2.5, ilosc:0},
    "zSokiem": {nazwa:"Lem. z sokiem", cena:3, ilosc:0}
};

function zmienIlosc(prod, delta){
    produkty[prod].ilosc += delta;
    if(produkty[prod].ilosc<0) produkty[prod].ilosc=0;
    document.getElementById(prod).innerText=produkty[prod].ilosc;
    aktualizujWartoscZakupu();
    aktualizujParagon();
}

// --- SUMA / wartość zakupu ---
function aktualizujWartoscZakupu(){
    let suma = 0;
    for(let p in produkty) suma += produkty[p].ilosc*produkty[p].cena;
    document.getElementById('wartoscZakupu').innerText = `Wartość zakupu: ${suma.toFixed(2)} zł`;
    document.getElementById('parSum').innerText = `SUMA: ${suma.toFixed(2)} zł`;
}

// --- Paragon ---
function ustawDate(){
    const dzis=new Date();
    const dz=String(dzis.getDate()).padStart(2,'0');
    const mies=String(dzis.getMonth()+1).padStart(2,'0');
    const rok=dzis.getFullYear();
    const godz=String(dzis.getHours()).padStart(2,'0');
    const min=String(dzis.getMinutes()).padStart(2,'0');
    const sek=String(dzis.getSeconds()).padStart(2,'0');
    document.getElementById('parDate').innerText=`Data: ${dz}.${mies}.${rok}, ${godz}:${min}:${sek}`;
}

setInterval(ustawDate,1000);

function aktualizujParagon(){
    const par = document.getElementById('parItems');
    par.innerHTML = '';
    for(let p in produkty){
        if(produkty[p].ilosc>0){
            const div = document.createElement('div');
            div.className='parItem';
            div.innerHTML=`<span>${produkty[p].nazwa}</span><span>x${produkty[p].ilosc} ${(produkty[p].ilosc*produkty[p].cena).toFixed(2)} zł</span>`;
            par.appendChild(div);
        }
    }
}

// --- Zarobek admin ---
let zarobek = 0;
function dodajKwote(){ let kw=10; zarobek+=kw; document.getElementById('zarobek').innerText=`Zarobek: ${zarobek.toFixed(2)} zł`;}
function odejmijKwote(){ let kw=10; zarobek-=kw;if(zarobek<0) zarobek=0; document.getElementById('zarobek').innerText=`Zarobek: ${zarobek.toFixed(2)} zł`;}
function wyzerujZarobek(){ zarobek=0; document.getElementById('zarobek').innerText=`Zarobek: ${zarobek.toFixed(2)} zł`; }

// --- Kopiuj i pobierz paragon ---
function kopiujParagon(){
    const paragon = document.getElementById('paragon');
    const range = document.createRange();
    range.selectNode(paragon);
    window.getSelection().removeAllRanges();
    window.getSelection().addRange(range);
    document.execCommand('copy');
    window.getSelection().removeAllRanges();
    alert("Paragon skopiowany!");
}

function pobierzParagon(){
    const paragon = document.getElementById('paragon');
    const blob = new Blob([paragon.innerText], {type:"text/plain"});
    const link = document.createElement('a');
    link.href = URL.createObjectURL(blob);
    link.download = "paragon.txt";
    link.click();
}
</script>
</body>
</html>
