<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<title>Stoisko z lemoniadą</title>
<style>
body {
    font-family: monospace;
    background: #f0f0f0;
    padding: 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
}

#loginPanel {
    text-align: center;
    margin-bottom: 20px;
}
#loginPanel h2 {
    font-size: 28px;
    font-weight: bold;
    margin-bottom: 10px;
}
#loginPanel input {
    margin: 5px;
}

#header {
    display: none;
    font-size: 24px;
    font-weight: bold;
    margin-bottom: 20px;
}

.product {
    display: flex;
    justify-content: space-between;
    width: 300px;
    margin: 5px 0;
    align-items: center;
}
.product span.ilosc {
    width: 30px;
    text-align: center;
}
.product button {
    width: 30px;
    margin-left: 5px;
}

#buttons {
    display: none;
    flex-wrap: wrap;
    gap: 10px;
    margin: 10px 0;
}

#zarobek, #zarobekCalkowity {
    font-weight: bold;
    margin: 5px 0;
}

#wartoscZakupu {
    font-weight: bold;
    margin-bottom: 10px;
}

#paragon {
    background: white;
    padding: 10px 15px;
    border: 1px dashed black;
    text-align: center;
    min-width: 250px;
}
.parLine { white-space: pre; display: block; }
.parTitle { font-weight: bold; font-size: 18px; margin: 6px 0; }
.parItem { display: flex; justify-content: space-between; margin: 2px 0; }
.parSum { font-weight: bold; margin: 6px 0; }
.parThanks { margin-top: 4px; }

#adminPanel, #loginAdminPanel {
    display: none;
    position: fixed;
    background: #fff;
    border: 2px solid black;
    padding: 15px;
    z-index: 100;
    top: 30%;
    left: 50%;
    transform: translate(-50%, -30%);
}
</style>

<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
</head>
<body>

<div id="loginPanel">
    <h2>Logowanie</h2>
    <input type="text" id="login" placeholder="Login">
    <input type="password" id="password" placeholder="Hasło">
    <button onclick="zaloguj()">Zaloguj</button>
    <div id="loginError" style="color:red; margin-top:5px;"></div>
</div>

<div id="header">Stoisko z lemoniadą</div>

<div id="products" style="display:none;">
    <div class="product">
        <span>Lem. bez soku</span>
        <span id="bezSoku" class="ilosc">0</span>
        <button onclick="zmienIlosc('bezSoku',1)">+</button>
        <button onclick="zmienIlosc('bezSoku',-1)">-</button>
    </div>
    <div class="product">
        <span>Lem. z sokiem</span>
        <span id="zSokiem" class="ilosc">0</span>
        <button onclick="zmienIlosc('zSokiem',1)">+</button>
        <button onclick="zmienIlosc('zSokiem',-1)">-</button>
    </div>
</div>

<div id="buttons">
    <button onclick="kopiujParagon()">Kopiuj paragon</button>
    <button onclick="pobierzParagon()">Pobierz paragon</button>
    <button onclick="generujParagon()">Generuj paragon</button>
</div>

<div id="zarobek" style="display:none;">Zarobek z dzisiaj: 0.00 zł</div>
<div id="zarobekCalkowity" style="display:none;">Zarobek łącznie: 0.00 zł</div>
<div id="wartoscZakupu" style="display:none;">Wartość zakupu: 0.00 zł</div>

<div id="paragon" style="display:none;">
    <div class="parLine">==============================</div>
    <div class="parTitle">LEMONIADA</div>
    <div class="parLine">==============================</div>
    <div id="parDate" class="parLine"></div>
    <div class="parLine">------------------------------</div>
    <div id="parItems"></div>
    <div class="parLine">------------------------------</div>
    <div id="parSum" class="parSum">SUMA: 0.00 zł</div>
    <div class="parLine">==============================</div>
    <div class="parThanks">Dziękujemy za zakupy!</div>
</div>

<script>
const users = { stoisko:"lemoniada123", admin:"admin123" };

function zaloguj(){
    const login = document.getElementById('login').value.trim();
    const pass = document.getElementById('password').value.trim();
    const err = document.getElementById('loginError');

    err.innerText = "";

    if(users[login] && users[login] === pass){
        loginPanel.style.display='none';
        header.style.display='block';
        products.style.display='block';
        buttons.style.display='flex';
        paragon.style.display='block';
        wartoscZakupu.style.display='block';
        zarobek.style.display='block';
        zarobekCalkowity.style.display='block';
        ustawDate();
    } else {
        err.innerText = "Błędny login lub hasło!";
    }
}

let produkty = {
    bezSoku:{nazwa:"Lem. bez soku", cena:2.5, ilosc:0},
    zSokiem:{nazwa:"Lem. z sokiem", cena:3, ilosc:0}
};

let sumaZakupu=0, zarobekDzis=0, zarobekCalk=0;

function zmienIlosc(p,d){
    produkty[p].ilosc=Math.max(0,produkty[p].ilosc+d);
    document.getElementById(p).innerText=produkty[p].ilosc;
    aktualizuj();
}

function aktualizuj(){
    let s=0, html="";
    for(let p in produkty){
        if(produkty[p].ilosc){
            let v=produkty[p].ilosc*produkty[p].cena;
            s+=v;
            html+=`<div class="parItem"><span>${produkty[p].nazwa}</span><span>${v.toFixed(2)} zł</span></div>`;
        }
    }
    sumaZakupu=s;
    parItems.innerHTML=html;
    parSum.innerText=`SUMA: ${s.toFixed(2)} zł`;
    wartoscZakupu.innerText=`Wartość zakupu: ${s.toFixed(2)} zł`;
}

function ustawDate(){
    parDate.innerText="Data: "+new Date().toLocaleString();
}

function generujParagon(){
    zarobekDzis+=sumaZakupu;
    zarobekCalk+=sumaZakupu;
    zarobek.innerText=`Zarobek z dzisiaj: ${zarobekDzis.toFixed(2)} zł`;
    zarobekCalkowity.innerText=`Zarobek łącznie: ${zarobekCalk.toFixed(2)} zł`;
    alert("Paragon wygenerowany");
}

function pobierzParagon(){
    html2canvas(paragon).then(c=>{
        let a=document.createElement("a");
        a.download="paragon.png";
        a.href=c.toDataURL();
        a.click();
    });
}
function kopiujParagon(){
    navigator.clipboard.writeText(paragon.innerText);
    alert("Skopiowano paragon");
}
</script>
</body>
    </html>
